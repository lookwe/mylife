# 性能优化章节


前端性能优化主要3大方面：`页面渲染`、`网络请求`、`内存清理`

* 页面渲染
    * [原生JS实现图片懒加载](#原生JS实现图片懒加载)

* 网络请求 
    * [浏览器网络请求相关优化](#浏览器网络请求相关优化)

* 内存清理
    * 


## 原生JS实现图片懒加载
* 原理：利用 js `IntersectionObserver` API 监听指定元素在可视区域变化做监听
* [实现代码](./图片懒加载实现方案.md)

## 浏览器网络请求相关优化
* 50个并发请求和10次5个分批请求区别？
    1. 50个一起和5个10次区别，第二个毋庸置疑的就是节省浏览CPU开销，节省出来的部分浏览器在处理其他方面工作会更快，比如渲染css，计算html结构，加载其他资源
  3. 根据技术角度思考：
    * `服务器压力`： 50一起以外高并发量更大，需考虑服务器负载压力
    * `响应时间`：每个请求的响应时间应该接近服务器的处理能力。但如果有请求阻塞或服务器资源瓶颈，可能会导致某些请求的响应时间增加，轻量则不需要考虑
    * `浏览器限制`：需判断用户使用浏览器是否支持，目前主流4大浏览器
    * `用户体验`：如果高比发请求阻塞或延迟，可能会导致页面加载不流畅或某些内容加载失败，轻量则出现频率更小
  2. 根据业务角度思考：
     * 如1: (并发情况)页面简单，但动态数据大量，可先请求首页1个请求，让用户先看着，并一些弹框提示通知告示，这是展示页完毕，可开始并发50请求数据，缓存用户去往其他页面则不需要再次请求，增强用户体验. 
     * 总结：在有用户操作有停留期间，如想提示用户体验，提交请求资源，让用户无感知，使得请求加载更快。

     * 如2：(分批情况)大文件切片上传，如果文件才分50份，全部并发请求，会影响程序健壮性，有风险，在特殊请求下，如果用户电脑内存不稳定(开了很多任务),或者受网络等不确定因素影响，导致其中N份请求失败，那么文件不完整后端文件组合不成功，最终导致用户上传了一般失败；
     * 为了更好可控性，分批并发请求可以减少处理应急成本
  * 则50并发好，如果是则是xxx业务，那么10次分批请求好
